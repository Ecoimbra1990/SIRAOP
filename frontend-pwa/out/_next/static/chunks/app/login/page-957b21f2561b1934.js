(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{9036:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s.Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},2364:function(e,t,a){Promise.resolve().then(a.bind(a,2803))},2803:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return LoginPage}});var s=a(7437),r=a(2265),n=a(4033),i=a(1865),o=a(8110),l=a(2160),c=a(7179),d=a(9843),u=a(9036),m=a(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let p=(0,m.Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),h=(0,m.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),x=l.Ry({email:l.Z_().email("Email inv\xe1lido"),password:l.Z_().min(6,"Senha deve ter pelo menos 6 caracteres")});function LoginPage(){let[e,t]=(0,r.useState)(!1),[a,l]=(0,r.useState)(!1),[m,y]=(0,r.useState)(""),{login:f}=(0,c.L)(),g=(0,n.useRouter)(),{register:w,handleSubmit:b,formState:{errors:v}}=(0,i.cI)({resolver:(0,o.F)(x)}),onSubmit=async e=>{try{l(!0),y("");let t=await d.iJ.login(e.email,e.password);f(t.user,t.access_token),g.push("/dashboard")}catch(e){var t,a;y((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Erro ao fazer login")}finally{l(!1)}};return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 to-primary-100 px-4",children:(0,s.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"mx-auto h-20 w-20 bg-primary-600 rounded-full flex items-center justify-center mb-6",children:(0,s.jsx)(u.Z,{className:"h-10 w-10 text-white"})}),(0,s.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"SIRAOP"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Sistema de Registro e An\xe1lise de Ocorr\xeancias Policiais"})]}),(0,s.jsxs)("div",{className:"bg-white py-8 px-6 shadow-xl rounded-lg",children:[(0,s.jsxs)("form",{className:"space-y-6",onSubmit:b(onSubmit),children:[m&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:m}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,s.jsx)("input",{...w("email"),type:"email",autoComplete:"email",className:"input mt-1",placeholder:"seu@email.com"}),v.email&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:v.email.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Senha"}),(0,s.jsxs)("div",{className:"mt-1 relative",children:[(0,s.jsx)("input",{...w("password"),type:e?"text":"password",autoComplete:"current-password",className:"input pr-10",placeholder:"Sua senha"}),(0,s.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>t(!e),children:e?(0,s.jsx)(p,{className:"h-5 w-5 text-gray-400"}):(0,s.jsx)(h,{className:"h-5 w-5 text-gray-400"})})]}),v.password&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:v.password.message})]}),(0,s.jsx)("button",{type:"submit",disabled:a,className:"btn-primary w-full h-12",children:a?(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):"Entrar"})]}),(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Acesso restrito a policiais autorizados"})})]})]})})}},9843:function(e,t,a){"use strict";a.d(t,{BV:function(){return l},iJ:function(){return i},vh:function(){return o}});var s=a(4829),r=a(7179);let n=s.Z.create({baseURL:"https://siraop-backend.fly.dev/api",headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{let t=r.L.getState().token;return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(r.L.getState().logout(),window.location.href="/login"),Promise.reject(e)});let i={login:async(e,t)=>{let a=await n.post("/auth/login",{email:e,password:t});return a.data},register:async e=>{let t=await n.post("/auth/register",e);return t.data}},o={getAll:async()=>{let e=await n.get("/ocorrencias");return e.data},getById:async e=>{let t=await n.get("/ocorrencias/".concat(e));return t.data},create:async e=>{let t=await n.post("/ocorrencias",e);return t.data},update:async(e,t)=>{let a=await n.patch("/ocorrencias/".concat(e),t);return a.data},delete:async e=>{let t=await n.delete("/ocorrencias/".concat(e));return t.data},findNearby:async(e,t,a)=>{let s=await n.get("/ocorrencias/nearby",{params:{lat:e,lng:t,radius:a}});return s.data}},l={gerarInformativoPDF:async e=>{let t=await n.post("/relatorios/informativo-pdf",{ocorrenciaIds:e},{responseType:"blob"}),a=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement("a");return s.href=a,s.setAttribute("download","informativo_".concat(Date.now(),".pdf")),document.body.appendChild(s),s.click(),s.remove(),window.URL.revokeObjectURL(a),t.data}}},7179:function(e,t,a){"use strict";a.d(t,{L:function(){return n}});var s=a(4660),r=a(4810);let n=(0,s.Ue)()((0,r.tJ)(e=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,login:(t,a)=>{e({user:t,token:a,isAuthenticated:!0,isLoading:!1})},logout:()=>{e({user:null,token:null,isAuthenticated:!1,isLoading:!1})},setLoading:t=>{e({isLoading:t})}}),{name:"siraop-auth-storage",partialize:e=>({user:e.user,token:e.token,isAuthenticated:e.isAuthenticated})}))}},function(e){e.O(0,[811,829,727,971,472,744],function(){return e(e.s=2364)}),_N_E=e.O()}]);